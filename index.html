<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="SignalCraft: A strategic market survival game.">
    <title>SignalCraft</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="game-container">
        <!-- Global Header: Status & Progression -->
        <header id="hud">
            <div class="stat-group">
                <span class="label">Balance</span>
                <span class="value money" id="balance-display">$100</span>
            </div>
            <div class="stat-group center">
                <h1 class="day-header">Day <span id="day-number">1</span></h1>
                <div id="negative-streak" class="negative-warning hidden">
                    ‚ö†Ô∏è Negative: <span id="streak-count">0</span>/3 days
                </div>
            </div>
            <div class="stat-group right">
                <span class="label">Level <span id="level-display">1</span></span>
                <div class="xp-bar-container">
                    <div id="xp-bar" class="xp-bar-fill"></div>
                </div>
            </div>
        </header>

        <!-- ACTION SCREEN -->
        <div id="action-screen" class="screen">
            <div class="screen-content">
                <div class="action-header">
                    <h2>What will you do today?</h2>
                    <p class="daily-cost-info">Daily Cost: $30 (Rent + Food)</p>
                </div>

                <!-- Modern Grid Layout -->
                <div class="action-grid">
                    <button id="action-work" class="action-card work-card">
                        <div class="card-icon">üíº</div>
                        <h3>Work</h3>
                        <p class="card-desc">McDonald's</p>
                        <div class="card-stats">
                            <span class="stat-badge income">+$120</span>
                        </div>
                        <p class="card-hint">Guaranteed income</p>
                    </button>

                    <button id="action-trade" class="action-card trade-card">
                        <div class="card-icon">üìà</div>
                        <h3>Trade</h3>
                        <p class="card-desc">Stock Market</p>
                        <div class="card-stats">
                            <span class="stat-badge risk">High Risk</span>
                        </div>
                        <p class="card-hint">Potential profits</p>
                    </button>

                    <button id="action-sleep" class="action-card sleep-card">
                        <div class="card-icon">üò¥</div>
                        <h3>Sleep</h3>
                        <p class="card-desc">Skip Day</p>
                        <div class="card-stats">
                            <span class="stat-badge neutral">$0</span>
                        </div>
                        <p class="card-hint">No income</p>
                    </button>
                </div>

                <!-- Debug Reset (smaller, bottom) -->
                <button id="debug-reset" class="debug-reset-btn">
                    üîÑ Reset Game Data
                </button>
            </div>
        </div>

        <!-- TRADE SCREEN -->
        <div id="trade-screen" class="screen hidden">
            <div class="trade-header">
                <button id="trade-back-btn" class="secondary-btn" style="margin-right: auto;">‚Üê Back</button>
                <button id="end-day-btn" class="end-day-btn">End Day & Pay Costs ‚Üí</button>
            </div>

            <!-- Main View: The Market -->
            <main id="market-view">
                <div class="price-readout">
                    <span id="current-price" class="price-large">100.00</span>
                    <span id="price-change" class="price-delta neutral">0.00%</span>
                </div>

                <div class="chart-container">
                    <canvas id="market-chart"></canvas>
                    <div id="regime-hint-overlay" class="hidden">
                        <span id="regime-text">Detecting...</span>
                    </div>
                </div>

                <!-- Visualization of Active Position -->
                <div id="position-tracker" class="hidden">
                    <div class="position-info">
                        <span class="label">Position</span>
                        <span class="value" id="position-size">0</span>
                    </div>
                    <div class="position-pnl">
                        <span class="label">P&L</span>
                        <span class="value" id="position-pnl">0.00</span>
                    </div>
                </div>

                <!-- Trade Amount Control -->
                <div class="trade-amount-control">
                    <label for="trade-amount-slider">Trade Amount</label>
                    <div class="slider-container">
                        <input type="range" id="trade-amount-slider" min="10" max="100" value="100" step="10">
                        <span id="trade-amount-display">100%</span>
                    </div>
                    <p class="trade-amount-hint">Use <span id="trade-amount-money">$0</span> of your balance</p>
                </div>
            </main>

            <!-- Controls -->
            <footer id="controls">
                <div id="feedback-panel" class="feedback-toast hidden">
                    <p id="feedback-message" class="feedback-text"></p>
                    <p id="feedback-insight" class="feedback-sub"></p>
                </div>

                <div class="strategy-toggle-container">
                    <button id="strategy-btn" class="secondary-btn" title="Automate logic based on current regime">
                        <span class="icon">‚ö°</span> Auto-Strategy: OFF
                    </button>
                </div>

                <div class="action-buttons">
                    <button id="sell-btn" class="action-btn sell">SELL</button>
                    <button id="buy-btn" class="action-btn buy">BUY</button>
                </div>
            </footer>
        </div>

        <!-- GAME OVER SCREEN -->
        <div id="game-over-screen" class="screen hidden">
            <div class="game-over-content">
                <h1 class="game-over-title">üíÄ Game Over</h1>
                <p class="game-over-message">You couldn't afford living costs for 3 consecutive days.</p>
                <div class="game-over-stats">
                    <div class="stat">
                        <span class="stat-label">Days Survived</span>
                        <span class="stat-value" id="final-days">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Final Balance</span>
                        <span class="stat-value" id="final-balance">$0</span>
                    </div>
                </div>
                <button id="restart-btn" class="restart-btn">üîÑ Try Again</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>